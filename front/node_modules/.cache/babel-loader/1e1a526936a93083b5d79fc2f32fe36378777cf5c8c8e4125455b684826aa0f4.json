{"ast":null,"code":"var _jsxFileName = \"/Users/stan/Desktop/socket/react-pong/src/components/PongGame.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport './PongGame.css';\nimport Area from './utils/Area';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PongGame = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const ball = {\n    x: 0,\n    y: 0,\n    radius: 10\n  }; // Coordonnées de la balle et son rayon\n  const [socket, setSocket] = useState(null);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Établir une connexion WebSocket avec le serveur\n    const newSocket = io('http://localhost:8001'); // Remplacez par l'URL du serveur WebSocket\n\n    // Gérer les messages reçus du serveur\n    newSocket.on('message', data => {\n      console.log(data);\n    });\n    setSocket(newSocket);\n    const area = new Area(canvas.width, canvas.height, 1, 2);\n\n    // Fonction de dessin\n    const draw = () => {\n      // Effacer le contenu du canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Dessiner une ligne noire autour du canvas pour la bordure\n      ctx.strokeStyle = 'black';\n      ctx.lineWidth = 1;\n      ctx.strokeRect(0, 0, canvas.width, canvas.height);\n\n      // Dessiner le milieu du terrain (ligne au milieu)\n      ctx.beginPath();\n      ctx.moveTo(canvas.width / 2, 0);\n      ctx.lineTo(canvas.width / 2, canvas.height);\n      ctx.stroke();\n      const player = area.getPlayer();\n      const opponent = area.getOpponent();\n      const ballEntity = area.getBall();\n      const racketSize = area.racketSize();\n      const ballSize = area.ballSize();\n\n      // Log des valeurs de la raquette du joueur\n      console.log('Player Y:', player.getLocation().getY());\n      console.log('Racket Width:', racketSize.width);\n      console.log('Racket Height:', racketSize.height);\n\n      // Log des valeurs de la raquette de l'opposant\n      console.log('Opponent Y:', opponent.getLocation().getY());\n\n      // Log des valeurs de la balle\n      console.log('Ball Y:', ballEntity.getLocation().getY());\n      console.log('Ball Width:', ballSize.width);\n\n      // Dessiner les raquettes et la balle en utilisant les données de Area\n      ctx.fillRect(player.getLocation().getX(), player.getLocation().getY(), racketSize.width, racketSize.height);\n      ctx.fillRect(opponent.getLocation().getX(), opponent.getLocation().getY(), racketSize.width, racketSize.height);\n      ctx.beginPath();\n      ctx.arc(ballEntity.getLocation().getX(), ballEntity.getLocation().getY(), ballSize.width / 2, 0, Math.PI * 2);\n      ctx.fillStyle = 'black'; // Couleur de la balle\n      ctx.fill();\n    };\n\n    // Appeler la fonction de dessin\n    draw();\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [socket]);\n\n  // Gérer les mouvements de la raquette du client\n  const handleRacketMovement = percent => {\n    if (socket) {\n      socket.emit('racketMovement', percent); // Envoyer le pourcentage au serveur\n    }\n  };\n\n  if (socket) {\n    // Écouter les mises à jour des raquettes des autres joueurs\n    socket.on('racketMoved', percent => {\n      // Mettez à jour l'affichage avec la nouvelle position de la raquette de l'adversaire\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"centered-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"score\",\n      children: \"Nom 1------0 - 2-----Nom 2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 800,\n      height: 400\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n_s(PongGame, \"zfzTiEA/b6Tpy7ywLZx+nJXO368=\");\n_c = PongGame;\nexport default PongGame;\nvar _c;\n$RefreshReg$(_c, \"PongGame\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Area","io","jsxDEV","_jsxDEV","PongGame","_s","canvasRef","ball","x","y","radius","socket","setSocket","canvas","current","ctx","getContext","newSocket","on","data","console","log","area","width","height","draw","clearRect","strokeStyle","lineWidth","strokeRect","beginPath","moveTo","lineTo","stroke","player","getPlayer","opponent","getOpponent","ballEntity","getBall","racketSize","ballSize","getLocation","getY","fillRect","getX","arc","Math","PI","fillStyle","fill","disconnect","handleRacketMovement","percent","emit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["/Users/stan/Desktop/socket/react-pong/src/components/PongGame.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport './PongGame.css';\nimport Area from './utils/Area';\nimport { io, Socket } from 'socket.io-client';\n\nconst PongGame: React.FC = () => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const ball = { x: 0, y: 0, radius: 10 }; // Coordonnées de la balle et son rayon\n  const [socket, setSocket] = useState<SocketIOClient.Socket | null>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Établir une connexion WebSocket avec le serveur\n    const newSocket = io('http://localhost:8001'); // Remplacez par l'URL du serveur WebSocket\n\n    // Gérer les messages reçus du serveur\n    newSocket.on('message', (data) => {\n      console.log(data);\n    });\n\n    setSocket(newSocket);\n\n\n    const area = new Area(canvas.width, canvas.height, 1, 2);\n\n    // Fonction de dessin\n    const draw = () => {\n      \n      // Effacer le contenu du canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Dessiner une ligne noire autour du canvas pour la bordure\n      ctx.strokeStyle = 'black';\n      ctx.lineWidth = 1;\n      ctx.strokeRect(0, 0, canvas.width, canvas.height);\n\n      // Dessiner le milieu du terrain (ligne au milieu)\n      ctx.beginPath();\n      ctx.moveTo(canvas.width / 2, 0);\n      ctx.lineTo(canvas.width / 2, canvas.height);\n      ctx.stroke();\n\n      const player = area.getPlayer();\n      const opponent = area.getOpponent();\n      const ballEntity = area.getBall();\n      const racketSize = area.racketSize();\n      const ballSize = area.ballSize();\n\n\n      // Log des valeurs de la raquette du joueur\n      console.log('Player Y:', player.getLocation().getY());\n      console.log('Racket Width:', racketSize.width);\n      console.log('Racket Height:', racketSize.height);\n      \n      // Log des valeurs de la raquette de l'opposant\n      console.log('Opponent Y:', opponent.getLocation().getY());\n      \n      // Log des valeurs de la balle\n      console.log('Ball Y:', ballEntity.getLocation().getY());\n      console.log('Ball Width:', ballSize.width);\n\n      // Dessiner les raquettes et la balle en utilisant les données de Area\n      ctx.fillRect(player.getLocation().getX(), player.getLocation().getY(), racketSize.width, racketSize.height);\n      ctx.fillRect(opponent.getLocation().getX(), opponent.getLocation().getY(), racketSize.width, racketSize.height);\n      ctx.beginPath();\n      ctx.arc(ballEntity.getLocation().getX(), ballEntity.getLocation().getY(), ballSize.width / 2, 0, Math.PI * 2);\n      ctx.fillStyle = 'black'; // Couleur de la balle\n      ctx.fill();\n    };\n\n    // Appeler la fonction de dessin\n    draw();\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [socket]);\n\n  // Gérer les mouvements de la raquette du client\n  const handleRacketMovement = (percent: number) => {\n    if (socket) {\n      socket.emit('racketMovement', percent); // Envoyer le pourcentage au serveur\n    }\n  };\n\n  if (socket) {\n    // Écouter les mises à jour des raquettes des autres joueurs\n    socket.on('racketMoved', (percent: number) => {\n      // Mettez à jour l'affichage avec la nouvelle position de la raquette de l'adversaire\n    });\n  }\n  return (\n    <div className=\"centered-container\">\n      <div className=\"score\">\n        Nom 1------0 - 2-----Nom 2\n      </div>\n      <canvas ref={canvasRef} width={800} height={400} />\n    </div>\n  );\n};\n\nexport default PongGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}